---
title: "Using R and Python to model future hospital activity: the NHP Demand and Capacity model"
subtitle: "EARL Conference 2024"
author: 
  - "[Tom Jemmett](mailto:thomas.jemmett@nhs.net)"
  - "[YiWen Hon](mailto:yiwen.hon1@nhs.net)"
date: 2024-09-05
date-format: "MMM D, YYYY"
format:
  revealjs:
    theme: [default, ../su_presentation.scss]
    transition: none
    chalkboard:
      buttons: false
    preview-links: auto
    slide-number: false
    auto-animate: true
    footer: |
      Learn more about [The Strategy Unit](https://www.strategyunitwm.nhs.uk/)
---

## The New Hospital Programme (NHP)

::: {.notes}
- Replacing crumbling infrastructure in some cases, completely new builds in others
- Previously this work was usually outsourced to private consultancies using diverse, often hidden methodologies
:::

- Commitment to build 40 new hospitals
- New hospitals need to be sized for the future needs of the communities they serve
- Our model is the first standardized national approach to forecasting hospital demand (??)

## About us: The Strategy Unit (SU)

:::: {.columns}

::: {.column width='60%'}

* An NHS research and analysis consultancy
* Hosted by [NHS Midlands and Lancashire Commissioning Support Unit](https://www.midlandsandlancashirecsu.nhs.uk/)
* Data Science team is new but rapidly growing

:::

::: {.column width='40%'}

![](../../logo_yellow.svg){width="100%"}

:::

::::

## The NHP model in a nutshell (1)

![](nhp_model_diagram.png)

::: {.notes}
- We use NHS England's Hospital Episode Statistics (HES) data
- A probabilistic model which factors in the uncertainty associated with making forecasts about future demand, using Monte Carlo simulation.
- There are close to 100 activity mitigators. Examples include smoking cessation activities which may reduce smoking related admissions in the future, or use of teleappointments to reduce in-person outpatient appointments.
:::

## The NHP model in a nutshell (2)

A probabilistic Monte Carlo simulation model, which: 

- Takes hospital activity from a baseline year
- Applies change factors outside of our control, such as demographic and non-demographic change
- Applies change factors that can be undertaken to reduce hospital activity - "activity mitigators"
- Produces a forecast of future demand based on the baseline data

## NHP model infrastructure

- Inputs and outputs apps are written in R {Shiny}
- Data pipelines written in R {targets}
- Model itself is written in Python
- All infrastructure is hosted in Azure

::: {.notes}
- All originally written by Tom
- As the team has grown we have shared responsibilities - YiWen in Python, Matt with Shiny, Tom as technical lead

:::

## Architecture of the NHP model

::: {.notes}

- Inputs and outputs apps are how users interact with the model. They can set different parameters and explore the results using these apps
- Model runs in a Docker container and we use an API to trigger it

:::

![](NHP-2024-08-16-142840.png)



## Conclusion

- Model is currently in use
- Planned future developments include:
  + Moving data and data pipelines into Databricks
  + Open sourcing model code (??)
  + National and regional forecasting



